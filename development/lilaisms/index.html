
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../../local-setup/intellij/">
      
      
        <link rel="next" href="../conventions/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.4.6">
    
    
      
        <title>Lilaisms - Lichess Development</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.35e1ed30.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.356b1318.min.css">
      
      


    
    
      
    
    
      
    
    
      <link rel="stylesheet" href="../../custom.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#lilaisms" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Lichess Development" class="md-header__button md-logo" aria-label="Lichess Development" data-md-component="logo">
      
  <img src="https://lichess1.org/assets/logo/lichess-white.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Lichess Development
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Lilaisms
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="blue" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3Z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="blue" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6zm0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4zM7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/></svg>
      </label>
    
  
</form>
      
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/fitztrev/docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Lichess Development" class="md-nav__button md-logo" aria-label="Lichess Development" data-md-component="logo">
      
  <img src="https://lichess1.org/assets/logo/lichess-white.svg" alt="logo">

    </a>
    Lichess Development
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/fitztrev/docs" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Dev Environments
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Dev Environments
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    lila-gitpod
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            lila-gitpod
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../lila-gitpod/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Setup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../lila-gitpod/usage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Usage
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../lila-gitpod/extensions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Extensions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../lila-gitpod/optional-services/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Optional Services
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../lila-gitpod/api-testing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API Testing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../lila-gitpod/contributing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../lila-gitpod/sharing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Sharing
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_2" >
        
          
          <label class="md-nav__link" for="__nav_2_2" id="__nav_2_2_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    lila-docker
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_2">
            <span class="md-nav__icon md-icon"></span>
            lila-docker
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../lila-docker/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Setup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../lila-docker/usage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Usage
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../lila-docker/scala-metals/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Scala Metals
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_3" >
        
          
          <label class="md-nav__link" for="__nav_2_3" id="__nav_2_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Local Setup
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_3">
            <span class="md-nav__icon md-icon"></span>
            Local Setup
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../local-setup/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Setup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../local-setup/mac/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    MacOS Notes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../local-setup/windows/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Windows Notes
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../local-setup/db/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Database
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../local-setup/lila-search/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    lila-search
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../local-setup/bloop/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Bloop
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../../local-setup/intellij/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    intellij
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Development
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Development
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Lilaisms
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Lilaisms
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#how-lila-uses-scala" class="md-nav__link">
    How lila uses scala
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#weird-code-you-will-only-see-in-lila" class="md-nav__link">
    Weird code you will only see in lila
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#disclaimer" class="md-nav__link">
    Disclaimer
  </a>
  
    <nav class="md-nav" aria-label="Disclaimer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#debugging-actually-useful" class="md-nav__link">
    Debugging (actually useful)
  </a>
  
    <nav class="md-nav" aria-label="Debugging (actually useful)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pp" class="md-nav__link">
    pp
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#thenpp" class="md-nav__link">
    thenPp
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#type-aliases" class="md-nav__link">
    Type aliases
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#future-shortcuts" class="md-nav__link">
    Future shortcuts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#int-functions" class="md-nav__link">
    Int functions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#option-functions" class="md-nav__link">
    Option functions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#boolean-functions" class="md-nav__link">
    Boolean functions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#future-functions" class="md-nav__link">
    Future functions
  </a>
  
    <nav class="md-nav" aria-label="Future functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sequencing-futures-and-effects" class="md-nav__link">
    Sequencing futures and effects
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#coding-standards" class="md-nav__link">
    Coding standards
  </a>
  
    <nav class="md-nav" aria-label="Coding standards">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#calling-methods" class="md-nav__link">
    Calling methods
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../conventions/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Conventions
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../translations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Translations
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../frontend/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Frontend
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../ui/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    User Interface
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../csrf/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    CSRF
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
    <li class="md-nav__item">
      <a href="../firefox-multi-account/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Firefox Multi-Account
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
    <li class="md-nav__item">
      <a href="../../other-resources/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Other Resources
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#how-lila-uses-scala" class="md-nav__link">
    How lila uses scala
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#weird-code-you-will-only-see-in-lila" class="md-nav__link">
    Weird code you will only see in lila
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#disclaimer" class="md-nav__link">
    Disclaimer
  </a>
  
    <nav class="md-nav" aria-label="Disclaimer">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#debugging-actually-useful" class="md-nav__link">
    Debugging (actually useful)
  </a>
  
    <nav class="md-nav" aria-label="Debugging (actually useful)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#pp" class="md-nav__link">
    pp
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#thenpp" class="md-nav__link">
    thenPp
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#type-aliases" class="md-nav__link">
    Type aliases
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#future-shortcuts" class="md-nav__link">
    Future shortcuts
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#int-functions" class="md-nav__link">
    Int functions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#option-functions" class="md-nav__link">
    Option functions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#boolean-functions" class="md-nav__link">
    Boolean functions
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#future-functions" class="md-nav__link">
    Future functions
  </a>
  
    <nav class="md-nav" aria-label="Future functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#sequencing-futures-and-effects" class="md-nav__link">
    Sequencing futures and effects
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#coding-standards" class="md-nav__link">
    Coding standards
  </a>
  
    <nav class="md-nav" aria-label="Coding standards">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#calling-methods" class="md-nav__link">
    Calling methods
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
    <a href="https://github.com/fitztrev/docs/blob/main/docs/development/lilaisms.md" title="Edit this page" class="md-content__button md-icon">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 20H6V4h7v5h5v3.1l2-2V8l-6-6H6c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h4v-2m10.2-7c.1 0 .3.1.4.2l1.3 1.3c.2.2.2.6 0 .8l-1 1-2.1-2.1 1-1c.1-.1.2-.2.4-.2m0 3.9L14.1 23H12v-2.1l6.1-6.1 2.1 2.1Z"/></svg>
    </a>
  
  


<h1 id="lilaisms">Lilaisms</h1>
<p>Code concepts and functions that are specific to, and idiomatic to, the lila codebase.</p>
<h2 id="how-lila-uses-scala">How lila uses scala</h2>
<p>lila makes little use of object orientation and particularly inheritance, but:</p>
<ul>
<li>Immutability is required everywhere. Notable exceptions can be made:</li>
<li>in akka actors (because race conditions are no longer a concern)</li>
<li>in performance sensitive functions. In this case, the mutability
    must be contained in the function scope. The function must expose
    an immutable signature.</li>
<li>in atomic structures like java's <code>AtomicReference</code> or <code>ConcurrentHashMap</code>.</li>
<li>Strong typing is preferred. For instance, <code>FiniteDuration</code> is better than <code>Int</code>,
  and <code>case class Name(value: String)</code> is better than <code>String</code>.
  The more the value is used in the code, and the more useful it is to type it correctly.
  This rule is actually loosely respected in lila, but that's the direction we're going to.</li>
</ul>
<h2 id="weird-code-you-will-only-see-in-lila">Weird code you will only see in lila</h2>
<p>If the function you're looking for is not here,
try the <a href="https://scala-lang.org/api/3.x/scala.html">scala doc</a>
or the <a href="https://typelevel.org/cats/">cats doc</a>.</p>
<h2 id="disclaimer">Disclaimer</h2>
<blockquote>
<p>Some of these lilaisms are driven by a compulsive tendency to play <a href="https://en.wikipedia.org/wiki/Code_golf">code golf</a>.
However, they also present benefits in terms of type safety.
In any case, contributors are never expected to use lilaisms. You can make use of them,
but a pull request will likely not be rejected because it isn't idiomatic to lila.
However, immutability and type safety remain requirements (with discussable exceptions).</p>
</blockquote>
<h3 id="debugging-actually-useful">Debugging (actually useful)</h3>
<h4 id="pp"><code>pp</code></h4>
<p><code>pp</code> means <code>print &amp; pass</code>, it's an inline <code>println</code>.
It prints the value and returns it.</p>
<div class="highlight"><pre><span></span><code><span class="s">&quot;foo&quot;</span><span class="p">.</span><span class="n">pp</span><span class="w">                   </span><span class="c1">// prints &quot;foo&quot; to stdout, and returns &quot;foo&quot;</span>

<span class="n">player</span><span class="p">.</span><span class="n">pp</span><span class="p">.</span><span class="n">make</span><span class="p">(</span><span class="n">move</span><span class="p">.</span><span class="n">pp</span><span class="p">).</span><span class="n">pp</span><span class="w"> </span><span class="c1">// behaves like player.make(move), but prints</span>
<span class="w">                           </span><span class="c1">// player, move, and the result of player.make(move)</span>

<span class="s">&quot;foo&quot;</span><span class="p">.</span><span class="n">pp</span><span class="p">(</span><span class="s">&quot;context&quot;</span><span class="p">)</span><span class="w">        </span><span class="c1">// prints &quot;context: foo&quot; to stdout, and returns &quot;foo&quot;</span>
</code></pre></div>
<h4 id="thenpp"><code>thenPp</code></h4>
<p>Like <code>pp</code> but applies to futures, and prints their result.</p>
<div class="highlight"><pre><span></span><code><span class="n">fetchUser</span><span class="p">(</span><span class="n">id</span><span class="p">).</span><span class="n">thenPp</span><span class="w">       </span><span class="c1">// returns Future[Option[User]] and prints the Option[User] when available</span>
</code></pre></div>
<h3 id="type-aliases">Type aliases</h3>
<p>For code golf purposes, common types have been aliased.</p>
<div class="highlight"><pre><span></span><code><span class="nc">Fu</span><span class="p">[</span><span class="nc">A</span><span class="p">]</span><span class="w">         </span><span class="c1">// Future[A]</span>
<span class="nc">Funit</span><span class="w">         </span><span class="c1">// Future[Unit]</span>
</code></pre></div>
<h3 id="future-shortcuts">Future shortcuts</h3>
<div class="highlight"><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">fuccess</span><span class="p">[</span><span class="nc">A</span><span class="p">](</span><span class="n">a</span><span class="p">:</span><span class="w"> </span><span class="nc">A</span><span class="p">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Future</span><span class="w"> </span><span class="n">successful</span><span class="w"> </span><span class="n">a</span>
<span class="k">def</span><span class="w"> </span><span class="nf">fufail</span><span class="p">[</span><span class="nc">A</span><span class="w"> </span><span class="o">&lt;:</span><span class="w"> </span><span class="nc">Throwable</span><span class="p">,</span><span class="w"> </span><span class="nc">B</span><span class="p">](</span><span class="n">a</span><span class="p">:</span><span class="w"> </span><span class="nc">A</span><span class="p">):</span><span class="w"> </span><span class="nc">Fu</span><span class="p">[</span><span class="nc">B</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Future</span><span class="w"> </span><span class="n">failed</span><span class="w"> </span><span class="n">a</span>
<span class="k">def</span><span class="w"> </span><span class="nf">fufail</span><span class="p">[</span><span class="nc">A</span><span class="p">](</span><span class="n">a</span><span class="p">:</span><span class="w"> </span><span class="nc">String</span><span class="p">):</span><span class="w"> </span><span class="nc">Fu</span><span class="p">[</span><span class="nc">A</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fufail</span><span class="p">(</span><span class="n">base</span><span class="p">.</span><span class="nc">LilaException</span><span class="p">(</span><span class="n">a</span><span class="p">))</span>
<span class="kd">val</span><span class="w"> </span><span class="n">funit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">fuccess</span><span class="p">(())</span>
</code></pre></div>
<h3 id="int-functions">Int functions</h3>
<blockquote>
<p>Reminder: In scala, <code>a.b(c)</code> == <code>a b c</code>. For instance, <code>1.+(2)</code> == <code>1 + 2</code>.</p>
</blockquote>
<div class="highlight"><pre><span></span><code><span class="c1">// I think it reads better</span>
<span class="n">a</span><span class="w"> </span><span class="n">atMost</span><span class="w"> </span><span class="n">b</span><span class="w">                  </span><span class="c1">// a min b</span>
<span class="n">a</span><span class="w"> </span><span class="n">atLeast</span><span class="w"> </span><span class="n">b</span><span class="w">                 </span><span class="c1">// a max b</span>
</code></pre></div>
<h3 id="option-functions">Option functions</h3>
<div class="highlight"><pre><span></span><code><span class="mi">42</span><span class="p">.</span><span class="n">some</span><span class="w">                     </span><span class="c1">// Option(42) // or Some(42): Option[Int]</span>
<span class="n">none</span><span class="p">[</span><span class="nc">Int</span><span class="p">]</span><span class="w">                   </span><span class="c1">// None: Option[Int]</span>

<span class="n">maybeInt</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="mi">0</span><span class="w">                </span><span class="c1">// maybeInt.getOrElse(0) // but with extra type safety</span>
<span class="n">maybeInt</span><span class="w"> </span><span class="n">ifTrue</span><span class="w"> </span><span class="n">boolean</span><span class="w">     </span><span class="c1">// maybeInt.filter(_ =&gt; boolean)</span>
<span class="n">maybeInt</span><span class="w"> </span><span class="n">ifFalse</span><span class="w"> </span><span class="n">boolean</span><span class="w">    </span><span class="c1">// maybeInt.filter(_ =&gt; !boolean)</span>
<span class="n">maybeInt</span><span class="w"> </span><span class="n">has</span><span class="w"> </span><span class="n">value</span><span class="w">          </span><span class="c1">// maybeInt contains value // but with extra type safety</span>

<span class="o">~</span><span class="n">maybeInt</span><span class="w">                   </span><span class="c1">// maybeInt | 0 // where 0 is provided by the Zero[Int] typeclass instance</span>
<span class="o">~</span><span class="n">maybeString</span><span class="w">                </span><span class="c1">// maybeString | &quot;&quot; // thanks to Zero[String] typeclass instance</span>
<span class="o">~</span><span class="n">maybeList</span><span class="w">                  </span><span class="c1">// maybeList | Nil // thanks to Zero[List[_]] typeclass instance</span>

<span class="n">maybeInt</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">f</span><span class="w">               </span><span class="c1">// maybeInt.fold(0)(f)</span>
<span class="w">                            </span><span class="c1">// e.g. 42.some so (_ + 1) == 43</span>
<span class="w">                            </span><span class="c1">//      none[Int] so (_ + 1) == 0</span>
<span class="n">maybeString</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">f</span><span class="w">            </span><span class="c1">// maybeString.fold(&quot;&quot;)(f)</span>

<span class="c1">// etc, with every type having a Zero instance.</span>
</code></pre></div>
<h3 id="boolean-functions">Boolean functions</h3>
<div class="highlight"><pre><span></span><code><span class="n">boolean</span><span class="w"> </span><span class="n">option</span><span class="w"> </span><span class="mi">42</span><span class="w">           </span><span class="c1">// if boolean then 42.some else None</span>
<span class="w">                            </span><span class="c1">// or 42.some ifTrue boolean</span>

<span class="n">boolean</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="mi">42</span><span class="w">               </span><span class="c1">// if boolean then 42 else 0</span>
<span class="n">boolean</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="s">&quot;foo&quot;</span><span class="w">            </span><span class="c1">// if boolean then &quot;foo&quot; else &quot;&quot;</span>
<span class="n">boolean</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="nc">List</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">)</span><span class="w">       </span><span class="c1">// if boolean then List(1, 2) else List.empty[Int]</span>
<span class="n">boolean</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="mi">42</span><span class="p">.</span><span class="n">some</span><span class="w">          </span><span class="c1">// if boolean then 42.some else none</span>
<span class="n">boolean</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">fuccess</span><span class="p">(</span><span class="mi">42</span><span class="p">)</span><span class="w">      </span><span class="c1">// if boolean then fuccess(42) else fuccess(0)</span>
<span class="n">boolean</span><span class="w"> </span><span class="n">so</span><span class="w"> </span><span class="n">asyncComputation</span><span class="w"> </span><span class="c1">// if boolean then asyncComputation else funit</span>

<span class="c1">// etc, with every type having a Zero instance.</span>
</code></pre></div>
<h3 id="future-functions">Future functions</h3>
<div class="highlight"><pre><span></span><code><span class="kd">val</span><span class="w"> </span><span class="n">fu</span><span class="p">:</span><span class="w"> </span><span class="nc">Future</span><span class="p">[</span><span class="nc">Int</span><span class="p">]</span>
<span class="kd">val</span><span class="w"> </span><span class="n">f</span><span class="p">:</span><span class="w"> </span><span class="nc">Int</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nc">Boolean</span>

<span class="n">fu</span><span class="w"> </span><span class="n">dmap</span><span class="w"> </span><span class="n">f</span><span class="w">                   </span><span class="c1">// fu map f // but runs on the same thread (perf tweak)</span>
<span class="n">fu</span><span class="w"> </span><span class="n">dforeach</span><span class="w"> </span><span class="n">f</span><span class="w">               </span><span class="c1">// fu foreach f // but runs on the same thread (perf tweak)</span>

<span class="n">fu</span><span class="p">.</span><span class="n">void</span><span class="w">                     </span><span class="c1">// fu.map(_ =&gt; ()) // discards the result, returns Funit</span>
<span class="n">fu</span><span class="w"> </span><span class="n">inject</span><span class="w"> </span><span class="s">&quot;foo&quot;</span><span class="w">             </span><span class="c1">// fu.map(_ =&gt; &quot;foo&quot;) // replaces the result</span>
</code></pre></div>
<h4 id="sequencing-futures-and-effects">Sequencing futures and effects</h4>
<div class="highlight"><pre><span></span><code><span class="n">fu</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">otherFu</span><span class="w">               </span><span class="c1">// fu.flatMap(_ =&gt; otherFu) // sequence without using first result</span>
<span class="n">fu</span><span class="w"> </span><span class="o">&gt;&gt;-</span><span class="w"> </span><span class="n">effect</span><span class="w">               </span><span class="c1">// fu andThen { case _ =&gt; effect } // run a side effect after completion</span>

<span class="n">fu1</span><span class="w"> </span><span class="o">&gt;&gt;</span><span class="w"> </span><span class="n">fu2</span><span class="w"> </span><span class="o">&gt;&gt;-</span><span class="w"> </span><span class="n">effect1</span><span class="w"> </span><span class="o">&gt;&gt;-</span><span class="w"> </span><span class="n">effect2</span><span class="w"> </span><span class="c1">// sequences f1 and f2, then runs effect1 then effect2</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="kd">val</span><span class="w"> </span><span class="n">futures</span><span class="p">:</span><span class="w"> </span><span class="nc">List</span><span class="p">[</span><span class="nc">Future</span><span class="p">[</span><span class="nc">Int</span><span class="p">]]</span>

<span class="n">futures</span><span class="p">.</span><span class="n">parallel</span><span class="p">:</span><span class="w"> </span><span class="nc">Future</span><span class="p">[</span><span class="nc">List</span><span class="p">[</span><span class="nc">Int</span><span class="p">]]</span><span class="w"> </span><span class="c1">// executes all futures and return one with a list of values</span>
</code></pre></div>
<h3 id="coding-standards">Coding standards</h3>
<p>Only mentioning what's not already rewritten by scalafmt.</p>
<h4 id="calling-methods">Calling methods</h4>
<div class="highlight"><pre><span></span><code><span class="n">obj</span><span class="p">.</span><span class="n">method</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span><span class="w">  </span><span class="c1">// yes, best</span>
<span class="n">obj</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="n">arg</span><span class="w">   </span><span class="c1">// yes if cute and not confusing</span>
<span class="n">obj</span><span class="p">.</span><span class="n">method</span><span class="w"> </span><span class="p">{</span><span class="w">     </span><span class="c1">// yes</span>
<span class="w">  </span><span class="n">argBlock</span>
<span class="p">}</span>
<span class="n">obj</span><span class="p">.</span><span class="n">method</span><span class="w"> </span><span class="p">(</span><span class="n">arg</span><span class="p">)</span><span class="w"> </span><span class="c1">// no</span>
<span class="n">obj</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="p">(</span><span class="n">arg</span><span class="p">)</span><span class="w"> </span><span class="c1">// no</span>
<span class="n">obj</span><span class="w"> </span><span class="n">method</span><span class="p">(</span><span class="n">arg</span><span class="p">)</span><span class="w"> </span><span class="c1">// no</span>

<span class="n">obj</span><span class="p">.</span><span class="n">method</span><span class="p">(</span><span class="n">arg1</span><span class="p">,</span><span class="w"> </span><span class="n">arg2</span><span class="p">)</span><span class="w">  </span><span class="c1">// yes</span>
<span class="n">obj</span><span class="p">.</span><span class="n">method</span><span class="w"> </span><span class="p">(</span><span class="n">arg1</span><span class="p">,</span><span class="w"> </span><span class="n">arg2</span><span class="p">)</span><span class="w"> </span><span class="c1">// no</span>
<span class="n">obj</span><span class="w"> </span><span class="n">method</span><span class="w"> </span><span class="p">(</span><span class="n">arg1</span><span class="p">,</span><span class="w"> </span><span class="n">arg2</span><span class="p">)</span><span class="w"> </span><span class="c1">// no</span>
<span class="n">obj</span><span class="w"> </span><span class="n">method</span><span class="p">(</span><span class="n">arg1</span><span class="p">,</span><span class="w"> </span><span class="n">arg2</span><span class="p">)</span><span class="w"> </span><span class="c1">// no</span>

<span class="n">obj</span><span class="p">.</span><span class="n">methodWithoutArg</span><span class="w"> </span><span class="c1">// yes</span>
<span class="n">obj</span><span class="w"> </span><span class="n">methodWithoutArg</span><span class="w"> </span><span class="c1">// no</span>
</code></pre></div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    
      
      <nav class="md-footer__inner md-grid" aria-label="Footer" >
        
          
          <a href="../../local-setup/intellij/" class="md-footer__link md-footer__link--prev" aria-label="Previous: intellij">
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
            </div>
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Previous
              </span>
              <div class="md-ellipsis">
                intellij
              </div>
            </div>
          </a>
        
        
          
          <a href="../conventions/" class="md-footer__link md-footer__link--next" aria-label="Next: Conventions">
            <div class="md-footer__title">
              <span class="md-footer__direction">
                Next
              </span>
              <div class="md-ellipsis">
                Conventions
              </div>
            </div>
            <div class="md-footer__button md-icon">
              
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
            </div>
          </a>
        
      </nav>
    
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.action.edit", "content.code.copy", "navigation.footer", "navigation.instant", "navigation.instant.progress", "navigation.sections", "toc.follow"], "search": "../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.aecac24b.min.js"></script>
      
    
  </body>
</html>